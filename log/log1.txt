D:\>ssh -L 8888:localhost:8888 root@8.141.7.139
root@8.141.7.139's password:
Welcome to Ubuntu 24.04.2 LTS (GNU/Linux 6.8.0-63-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Wed Aug 13 07:34:58 PM CST 2025

  System load:  0.0                Processes:             134
  Usage of /:   31.0% of 98.05GB   Users logged in:       1
  Memory usage: 55%                IPv4 address for eth0: 172.21.141.42
  Swap usage:   0%

 * Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s
   just raised the bar for easy, resilient and secure K8s cluster deployment.

   https://ubuntu.com/engage/secure-kubernetes-at-the-edge

Expanded Security Maintenance for Applications is not enabled.

30 updates can be applied immediately.
To see these additional updates run: apt list --upgradable

20 additional security updates can be applied with ESM Apps.
Learn more about enabling ESM Apps service at https://ubuntu.com/esm


1 updates could not be installed automatically. For more details,
see /var/log/unattended-upgrades/unattended-upgrades.log

*** System restart required ***

Welcome to Alibaba Cloud Elastic Compute Service !

Last login: Wed Aug 13 16:32:43 2025 from 119.1.87.211
conda: command not found
ğŸ˜¼ å·²å¼€å¯ä»£ç†ç¯å¢ƒ
(base) root@iZ2ze539tadlwtl57jxfh1Z:~#   cd /root/Code/Voice_DH_live
(base) root@iZ2ze539tadlwtl57jxfh1Z:~/Code/Voice_DH_live# conda activate dh_live
(dh_live) root@iZ2ze539tadlwtl57jxfh1Z:~/Code/Voice_DH_live# python web_demo/server_realtime.py
LLMé…ç½®: æä¾›å•†=doubao, æ¨¡å‹=doubao-seed-1.6-250615
INFO:     Started server process [177392]
INFO:     Waiting for application startup.
ASRæ¨¡å‹æ­£åœ¨åˆå§‹åŒ–ï¼Œè¯·ç¨ç­‰
asr: engine loaded in 7.64s
TTSæ¨¡å‹æ­£åœ¨åˆå§‹åŒ–ï¼Œè¯·ç¨ç­‰
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8888 (Press CTRL+C to quit)
INFO:     127.0.0.1:36478 - "POST /eb_stream HTTP/1.1" 200 OK
gen_stream 1.0 1
----- streaming request -----
get_audio:  ä½ å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ å‘€ï½æˆ‘æ˜¯äººå·¥æ™ºèƒ½åŠ©æ‰‹ï¼Œ
run_tts ä½ å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ å‘€ï½æˆ‘æ˜¯äººå·¥æ™ºèƒ½åŠ©æ‰‹ï¼Œ 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'ï½'
get_audio:  ä½ å¯ä»¥å«æˆ‘è±†åŒ…ã€‚ä¸ç®¡æ˜¯æƒ³èŠå¤©ã€
run_tts ä½ å¯ä»¥å«æˆ‘è±†åŒ…ã€‚ä¸ç®¡æ˜¯æƒ³èŠå¤©ã€ 1.0 1
get_audio:  é—®é—®é¢˜ï¼Œè¿˜æ˜¯éœ€è¦å¸®å¿™åšç‚¹ä»€ä¹ˆï¼Œ
run_tts é—®é—®é¢˜ï¼Œè¿˜æ˜¯éœ€è¦å¸®å¿™åšç‚¹ä»€ä¹ˆï¼Œ 1.0 1
get_audio:  éƒ½å¯ä»¥è·Ÿæˆ‘è¯´å“¦ï½
run_tts éƒ½å¯ä»¥è·Ÿæˆ‘è¯´å“¦ï½ 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'ï½'
INFO:     204.76.203.193:48212 - "GET http%3A//ip-api.com/json/ HTTP/1.1" 404 Not Found
WARNING:  Invalid HTTP request received.
WARNING:  Invalid HTTP request received.
INFO:     127.0.0.1:33872 - "POST /eb_stream HTTP/1.1" 200 OK
gen_stream 1.0 1
----- streaming request -----
get_audio:  256Ã—10=2560

**ç­”æ¡ˆ**ï¼š
run_tts 256Ã—10=2560

**ç­”æ¡ˆ**ï¼š 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '256'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'Ã—'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '10'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '='
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '2560'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '
'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '
'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '*'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '*'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '*'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '*'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'ï¼š'
get_audio:  2560
run_tts 2560 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '2560'
/project/sherpa-onnx/csrc/offline-tts-vits-impl.h:Generate:214 Failed to convert 2560 to token IDs
ERROR:    Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/responses.py", line 271, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    |     await response(scope, receive, send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/responses.py", line 270, in __call__
    |     with collapse_excgroups():
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/responses.py", line 274, in wrap
    |     await func()
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/responses.py", line 254, in stream_response
    |     async for chunk in self.body_iterator:
    |   File "/root/Code/Voice_DH_live/web_demo/server_realtime.py", line 109, in gen_stream
    |     base64_string = await get_audio(llm_answer_cache, voice_id=voice_id, voice_speed=voice_speed)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/Code/Voice_DH_live/web_demo/voiceapi/tts.py", line 140, in get_audio
    |     soundfile.write(
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/soundfile.py", line 363, in write
    |     with SoundFile(file, 'w', samplerate, channels,
    |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/soundfile.py", line 690, in __init__
    |     self._file = self._open(file, mode_int, closefd)
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/soundfile.py", line 1265, in _open
    |     raise LibsndfileError(err, prefix="Error opening {0!r}: ".format(self.name))
    | soundfile.LibsndfileError: Error opening <_io.BytesIO object at 0x7645541eae30>: Internal error : SF_INFO struct incomplete.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await response(scope, receive, send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/responses.py", line 270, in __call__
    with collapse_excgroups():
  File "/root/anaconda3/envs/dh_live/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    raise exc
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/responses.py", line 274, in wrap
    await func()
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/responses.py", line 254, in stream_response
    async for chunk in self.body_iterator:
  File "/root/Code/Voice_DH_live/web_demo/server_realtime.py", line 109, in gen_stream
    base64_string = await get_audio(llm_answer_cache, voice_id=voice_id, voice_speed=voice_speed)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/Code/Voice_DH_live/web_demo/voiceapi/tts.py", line 140, in get_audio
    soundfile.write(
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/soundfile.py", line 363, in write
    with SoundFile(file, 'w', samplerate, channels,
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/soundfile.py", line 690, in __init__
    self._file = self._open(file, mode_int, closefd)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/soundfile.py", line 1265, in _open
    raise LibsndfileError(err, prefix="Error opening {0!r}: ".format(self.name))
soundfile.LibsndfileError: Error opening <_io.BytesIO object at 0x7645541eae30>: Internal error : SF_INFO struct incomplete.
INFO:     127.0.0.1:47652 - "POST /eb_stream HTTP/1.1" 200 OK
gen_stream 1.0 1
----- streaming request -----
get_audio:  å¹¿å·å’Œä¸Šæµ·ä½œä¸ºä¸­å›½è¶…å¤§åŸå¸‚ï¼Œ
run_tts å¹¿å·å’Œä¸Šæµ·ä½œä¸ºä¸­å›½è¶…å¤§åŸå¸‚ï¼Œ 1.0 1
get_audio:  åœ°é“ç½‘ç»œå‡æ‰¿æ‹…ç€å·¨å¤§çš„é€šå‹¤å‹åŠ›ï¼Œ
run_tts åœ°é“ç½‘ç»œå‡æ‰¿æ‹…ç€å·¨å¤§çš„é€šå‹¤å‹åŠ›ï¼Œ 1.0 1
get_audio:  **â€œä¸Šæµ·åœ°é“ä¸æ‹¥æŒ¤â€
run_tts **â€œä¸Šæµ·åœ°é“ä¸æ‹¥æŒ¤â€ 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '*'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '*'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'â€œ'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'â€'
get_audio:  çš„è¯´æ³•ä¸å®é™…æƒ…å†µå­˜åœ¨åå·®**â€”â€”ä¸Šæµ·åœ°é“åœ¨æ—©æ™šé«˜å³°æ—¶æ®µï¼Œ
run_tts çš„è¯´æ³•ä¸å®é™…æƒ…å†µå­˜åœ¨åå·®**â€”â€”ä¸Šæµ·åœ°é“åœ¨æ—©æ™šé«˜å³°æ—¶æ®µï¼Œ 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '*'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '*'
get_audio:  å¤šæ¡æ ¸å¿ƒçº¿è·¯ï¼ˆå¦‚1å·çº¿ã€
run_tts å¤šæ¡æ ¸å¿ƒçº¿è·¯ï¼ˆå¦‚1å·çº¿ã€ 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'ï¼ˆ'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '1'
get_audio:  2å·çº¿ã€9å·çº¿ã€11å·çº¿ç­‰ï¼‰
run_tts 2å·çº¿ã€9å·çº¿ã€11å·çº¿ç­‰ï¼‰ 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '2'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '9'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '11'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'ï¼‰'
get_audio:  åŒæ ·é¢ä¸´ä¸¥é‡æ‹¥æŒ¤ï¼Œ
run_tts åŒæ ·é¢ä¸´ä¸¥é‡æ‹¥æŒ¤ï¼Œ 1.0 1
get_audio:  éƒ¨åˆ†ç«™ç‚¹çš„å®¢æµå¼ºåº¦ç”šè‡³ä½å±…å…¨å›½å‰åˆ—ã€‚
run_tts éƒ¨åˆ†ç«™ç‚¹çš„å®¢æµå¼ºåº¦ç”šè‡³ä½å±…å…¨å›½å‰åˆ—ã€‚ 1.0 1
get_audio:  ä¸¤åœ°åœ°é“çš„æ‹¥æŒ¤ç¨‹åº¦æ›´å¤šæ˜¯â€œ
run_tts ä¸¤åœ°åœ°é“çš„æ‹¥æŒ¤ç¨‹åº¦æ›´å¤šæ˜¯â€œ 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'â€œ'
get_audio:  çº¿è·¯å·®å¼‚â€â€œæ—¶æ®µå·®å¼‚â€
run_tts çº¿è·¯å·®å¼‚â€â€œæ—¶æ®µå·®å¼‚â€ 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'â€'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'â€'
get_audio:  ï¼Œè€Œéâ€œæ•´ä½“å·®å¼‚â€
run_tts ï¼Œè€Œéâ€œæ•´ä½“å·®å¼‚â€ 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'â€œ'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'â€'
get_audio:  ã€‚ä»¥ä¸‹ä»å®¢è§‚è§’åº¦åˆ†æä¸¤åœ°åœ°é“æ‹¥æŒ¤çš„å…±æ€§åŸå› åŠéƒ¨åˆ†å·®å¼‚åŒ–ç‰¹å¾ï¼Œ
run_tts ã€‚ä»¥ä¸‹ä»å®¢è§‚è§’åº¦åˆ†æä¸¤åœ°åœ°é“æ‹¥æŒ¤çš„å…±æ€§åŸå› åŠéƒ¨åˆ†å·®å¼‚åŒ–ç‰¹å¾ï¼Œ 1.0 1
get_audio:  å¸®åŠ©æ›´å…¨é¢ç†è§£è¿™ä¸€ç°è±¡ï¼š
run_tts å¸®åŠ©æ›´å…¨é¢ç†è§£è¿™ä¸€ç°è±¡ï¼š 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'ï¼š'
get_audio:


### ä¸€ã€
run_tts


### ä¸€ã€ 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '
'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '
'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '
'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '#'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '#'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '#'
get_audio:  å…ˆæ¾„æ¸…ï¼šä¸Šæµ·åœ°é“åŒæ ·é¢ä¸´æ‹¥æŒ¤æŒ‘æˆ˜
ä¸Šæµ·åœ°é“æ˜¯å…¨çƒè¿è¥é‡Œç¨‹æœ€é•¿ï¼ˆ
run_tts å…ˆæ¾„æ¸…ï¼šä¸Šæµ·åœ°é“åŒæ ·é¢ä¸´æ‹¥æŒ¤æŒ‘æˆ˜
ä¸Šæµ·åœ°é“æ˜¯å…¨çƒè¿è¥é‡Œç¨‹æœ€é•¿ï¼ˆ 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'ï¼š'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '
'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'ï¼ˆ'
get_audio:  æˆªè‡³2023å¹´è¶…800å…¬é‡Œï¼‰
run_tts æˆªè‡³2023å¹´è¶…800å…¬é‡Œï¼‰ 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '2023'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '800'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'ï¼‰'
get_audio:  ã€æ—¥å‡å®¢æµé‡æœ€å¤§ï¼ˆ
run_tts ã€æ—¥å‡å®¢æµé‡æœ€å¤§ï¼ˆ 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'ï¼ˆ'
get_audio:  å·¥ä½œæ—¥è¶…1000ä¸‡äººæ¬¡ï¼‰
run_tts å·¥ä½œæ—¥è¶…1000ä¸‡äººæ¬¡ï¼‰ 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '1000'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'ï¼‰'
get_audio:  çš„åœ°é“ç½‘ç»œä¹‹ä¸€ã€‚æ ¹æ®ä¸Šæµ·ç”³é€šåœ°é“å…¬å¼€æ•°æ®ï¼Œ
run_tts çš„åœ°é“ç½‘ç»œä¹‹ä¸€ã€‚æ ¹æ®ä¸Šæµ·ç”³é€šåœ°é“å…¬å¼€æ•°æ®ï¼Œ 1.0 1
get_audio:  2023å¹´æ—©é«˜å³°ï¼ˆ
run_tts 2023å¹´æ—©é«˜å³°ï¼ˆ 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '2023'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'ï¼ˆ'
get_audio:  7:30-9:00ï¼‰
run_tts 7:30-9:00ï¼‰ 1.0 1
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '7'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV ':'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '30'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '-'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '9'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV ':'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV '00'
/project/sherpa-onnx/csrc/jieba-lexicon.cc:ConvertTextToTokenIds:169 Ignore OOV 'ï¼‰'
/project/sherpa-onnx/csrc/offline-tts-vits-impl.h:Generate:214 Failed to convert 7:30-9:00ï¼‰ to token IDs
ERROR:    Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_utils.py", line 77, in collapse_excgroups
  |     yield
  |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/responses.py", line 271, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    |     raise exc
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    |     await response(scope, receive, send)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/responses.py", line 270, in __call__
    |     with collapse_excgroups():
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    |     raise exc
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/responses.py", line 274, in wrap
    |     await func()
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/responses.py", line 254, in stream_response
    |     async for chunk in self.body_iterator:
    |   File "/root/Code/Voice_DH_live/web_demo/server_realtime.py", line 96, in gen_stream
    |     base64_string = await get_audio(first_sentence, voice_id=voice_id, voice_speed=voice_speed)
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/Code/Voice_DH_live/web_demo/voiceapi/tts.py", line 140, in get_audio
    |     soundfile.write(
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/soundfile.py", line 363, in write
    |     with SoundFile(file, 'w', samplerate, channels,
    |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/soundfile.py", line 690, in __init__
    |     self._file = self._open(file, mode_int, closefd)
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/soundfile.py", line 1265, in _open
    |     raise LibsndfileError(err, prefix="Error opening {0!r}: ".format(self.name))
    | soundfile.LibsndfileError: Error opening <_io.BytesIO object at 0x764550b0acf0>: Internal error : SF_INFO struct incomplete.
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 78, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await response(scope, receive, send)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/responses.py", line 270, in __call__
    with collapse_excgroups():
  File "/root/anaconda3/envs/dh_live/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/_utils.py", line 83, in collapse_excgroups
    raise exc
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/responses.py", line 274, in wrap
    await func()
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/starlette/responses.py", line 254, in stream_response
    async for chunk in self.body_iterator:
  File "/root/Code/Voice_DH_live/web_demo/server_realtime.py", line 96, in gen_stream
    base64_string = await get_audio(first_sentence, voice_id=voice_id, voice_speed=voice_speed)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/Code/Voice_DH_live/web_demo/voiceapi/tts.py", line 140, in get_audio
    soundfile.write(
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/soundfile.py", line 363, in write
    with SoundFile(file, 'w', samplerate, channels,
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/soundfile.py", line 690, in __init__
    self._file = self._open(file, mode_int, closefd)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/anaconda3/envs/dh_live/lib/python3.11/site-packages/soundfile.py", line 1265, in _open
    raise LibsndfileError(err, prefix="Error opening {0!r}: ".format(self.name))
soundfile.LibsndfileError: Error opening <_io.BytesIO object at 0x764550b0acf0>: Internal error : SF_INFO struct incomplete.